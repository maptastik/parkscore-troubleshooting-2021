var e=Object.defineProperty,r=Object.prototype.hasOwnProperty,t=Object.getOwnPropertySymbols,s=Object.prototype.propertyIsEnumerable,n=(r,t,s)=>t in r?e(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,l=(e,l)=>{for(var o in l||(l={}))r.call(l,o)&&n(e,o,l[o]);if(t)for(var o of t(l))s.call(l,o)&&n(e,o,l[o]);return e};import{I as o}from"./Utils.88967ee0.js";import{b as i,c as a,r as c}from"./WGLContainer.df898e6a.js";const f=(e,r)=>e.key.level-r.key.level!=0?e.key.level-r.key.level:e.key.row-r.key.row!=0?e.key.row-r.key.row:e.key.col-r.key.col;class d extends i{constructor(e){super(),this._tileInfoView=e}renderChildren(e){this.sortChildren(f),this.setStencilReference(),super.renderChildren(e)}createRenderParams(e){const{state:r}=e;return l(l({},super.createRenderParams(e)),{requiredLevel:this._tileInfoView.getClosestInfoForScale(r.scale).level,displayLevel:this._tileInfoView.tileInfo.scaleToZoom(r.scale)})}prepareRenderPasses(e){const r=e.registerRenderPass({name:"stencil",brushes:[a],drawPhase:o.DEBUG|o.MAP|o.HIGHLIGHT,target:()=>this.getStencilTarget()}),t=e.registerRenderPass({name:"tileInfo",brushes:[c],drawPhase:o.DEBUG,target:()=>this.children,has:"esri-tiles-debug"});return[...super.prepareRenderPasses(e),r,t]}getStencilTarget(){return this.children}updateTransforms(e){for(const r of this.children){const t=this._tileInfoView.getTileResolution(r.key);r.setTransform(e,t)}}setStencilReference(){let e=1;for(const r of this.children)r.stencilRef=e++}}export{d};
