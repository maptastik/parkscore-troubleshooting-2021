var e=Object.defineProperty,r=Object.prototype.hasOwnProperty,t=Object.getOwnPropertySymbols,s=Object.prototype.propertyIsEnumerable,i=(r,t,s)=>t in r?e(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,o=(e,o)=>{for(var a in o||(o={}))r.call(o,a)&&i(e,a,o[a]);if(t)for(var a of t(o))s.call(o,a)&&i(e,a,o[a]);return e};import{e as a,y as l,cz as n,b as p,e_ as u,x as c,A as y,i as f,a as d,eG as m,X as g,bk as h,eI as B,U as v,ai as P,fg as b}from"./vendor.1ee57f36.js";import{c as A,n as S,e as O}from"./NAMessage.d2825902.js";import"./GPMessage.9782015f.js";function k(e){return e.features.map((r=>{const t=g.fromJSON(e.spatialReference),s=y.fromJSON(r);return h(s.geometry).spatialReference=t,s}))}function G(e){return e.features.map((r=>(r.geometry.spatialReference=e.spatialReference,m(r.geometry))))}let j=class extends d{constructor(e){super(e),this.facilities=null,this.messages=null,this.pointBarriers=null,this.polylineBarriers=null,this.polygonBarriers=null,this.serviceAreaPolylines=null,this.serviceAreaPolygons=null}readFacilities(e){return G(e)}readPointBarriers(e,r){return G(r.barriers)}readPolylineBarriers(e){return G(e)}readPolygonBarriers(e){return G(e)}readIncidents(e,r){return k(r.saPolylines)}readServiceAreaPolygons(e,r){return k(r.saPolygons)}};a([l({type:[n]})],j.prototype,"facilities",void 0),a([p("facilities")],j.prototype,"readFacilities",null),a([l({type:[A]})],j.prototype,"messages",void 0),a([l({type:[n]})],j.prototype,"pointBarriers",void 0),a([p("pointBarriers",["barriers"])],j.prototype,"readPointBarriers",null),a([l({type:[u]})],j.prototype,"polylineBarriers",void 0),a([p("polylineBarriers")],j.prototype,"readPolylineBarriers",null),a([l({type:[c]})],j.prototype,"polygonBarriers",void 0),a([p("polygonBarriers")],j.prototype,"readPolygonBarriers",null),a([l({type:[y]})],j.prototype,"serviceAreaPolylines",void 0),a([p("serviceAreaPolylines",["saPolylines"])],j.prototype,"readIncidents",null),a([l({type:[y]})],j.prototype,"serviceAreaPolygons",void 0),a([p("serviceAreaPolygons",["saPolygons"])],j.prototype,"readServiceAreaPolygons",null),j=a([f("esri.tasks.support.ServiceAreaSolveResult")],j);var R=j;const _=O({accumulateAttributes:{name:"accumulateAttributeNames"},attributeParameterValues:!0,defaultBreaks:!0,facilities:!0,outSpatialReference:{name:"outSR",getter:e=>e.outSpatialReference.wkid},pointBarriers:{name:"barriers"},polylineBarriers:!0,polygonBarriers:!0,restrictionAttributes:{name:"restrictionAttributeNames"},returnPointBarriers:{name:"returnBarriers"},travelMode:!0});let I=class extends(S(b)){constructor(e){super(e),this.url=null}solve(e,r){const t=[],s=[],i={},a={};return e.facilities&&e.facilities.features&&this._collectGeometries(e.facilities.features,s,"facilities.features",i),e.pointBarriers&&e.pointBarriers.features&&this._collectGeometries(e.pointBarriers.features,s,"pointBarriers.features",i),e.polylineBarriers&&e.polylineBarriers.features&&this._collectGeometries(e.polylineBarriers.features,s,"polylineBarriers.features",i),e.polygonBarriers&&e.polygonBarriers.features&&this._collectGeometries(e.polygonBarriers.features,s,"polygonBarriers.features",i),B(s).then((e=>{for(const r in i){const s=i[r];t.push(r),a[r]=e.slice(s[0],s[1])}return this._isInputGeometryZAware(a,t)?this.getServiceDescription():v({dontCheck:!0})})).then((s=>{("dontCheck"in s?s.dontCheck:s.hasZ)||this._dropZValuesOffInputGeometry(a,t);for(const r in a)a[r].forEach(((t,s)=>{e.get(r)[s].geometry=t}));let i={query:o(o(o({},this.parsedUrl.query),{f:"json"}),_.toQueryParams(e))};return(this.requestOptions||r)&&(i=o(o(o({},this.requestOptions),r),i)),P(`${this.parsedUrl.path}/solveServiceArea`,i)})).then((e=>R.fromJSON(e.data)))}_collectGeometries(e,r,t,s){s[t]=[r.length,r.length+e.length],e.forEach((e=>{r.push(e.geometry)}))}};a([l()],I.prototype,"url",void 0),I=a([f("esri.tasks.ServiceAreaTask")],I);var N=I;export default N;
