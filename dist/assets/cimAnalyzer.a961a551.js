var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,o=Object.getOwnPropertySymbols,i=Object.prototype.propertyIsEnumerable,r=(t,o,i)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[o]=i,n=(e,n)=>{for(var a in n||(n={}))t.call(n,a)&&r(e,a,n[a]);if(o)for(var a of o(n))i.call(n,a)&&r(e,a,n[a]);return e};import{d7 as a,g as l,m as s,eD as c,aJ as f,eE as m,dH as u,aZ as y,aG as p}from"./vendor.1ee57f36.js";import{i as h,n as g}from"./index.4894e768.js";import{U as d,v as S,q as v,k as b}from"./quantizationUtils.66d2dc60.js";import{i as O,a as N,y as k,S as C}from"./CIMSymbolHelper.2ecfa4b9.js";function x(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":{const t=e.symbolLayers;return t&&1===t.length?x(t[0]):null}case"CIMVectorMarker":{const t=e.markerGraphics;if(!t||1!==t.length)return null;const o=t[0];if(!o)return null;const i=o.geometry;if(!i)return null;const r=o.symbol;return!r||"CIMPolygonSymbol"!==r.type&&"CIMLineSymbol"!==r.type?null:{geom:i,asFill:"CIMPolygonSymbol"===r.type}}case"sdf":return{geom:e.geom,asFill:e.asFill}}return null}function M(e){let t=1/0,o=-1/0,i=1/0,r=-1/0;for(const n of e)for(const e of n)e[0]<t&&(t=e[0]),e[0]>o&&(o=e[0]),e[1]<i&&(i=e[1]),e[1]>r&&(r=e[1]);return[t,i,o,r]}function P(e){return e?e.rings?M(e.rings):e.paths?M(e.paths):a(e)?[e.xmin,e.ymin,e.xmax,e.ymax]:null:null}function L(e,t,o,i,r){const[n,a,l,s]=e;if(l<n||s<a)return[0,0,0];const c=l-n,f=s-a,m=Math.floor(31.5),u=(128-2*(m+1))/Math.max(c,f),y=Math.round(c*u)+2*m,p=Math.round(f*u)+2*m;let h=1;t&&(h=p/u/(t.ymax-t.ymin));let g=0,d=0;if(i)if(r){if(t&&o&&t.ymax-t.ymin>0){const e=(t.xmax-t.xmin)/(t.ymax-t.ymin);g=i.x/(o*e),d=i.y/o}}else g=i.x,d=i.y;return g=.5*(t.xmax+t.xmin)+g*(t.xmax-t.xmin),d=.5*(t.ymax+t.ymin)+d*(t.ymax-t.ymin),g-=n,d-=a,g*=u,d*=u,g+=m,d+=m,[h,g/y-.5,-(d/p-.5)]}function w(e){const t=(o=e.geom)?o.rings?o.rings:o.paths?o.paths:void 0!==o.xmin&&void 0!==o.ymin&&void 0!==o.xmax&&void 0!==o.ymax?[[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]]]:null:null;var o;const i=function(e){let t=1/0,o=-1/0,i=1/0,r=-1/0;for(const n of e)for(const e of n)e[0]<t&&(t=e[0]),e[0]>o&&(o=e[0]),e[1]<i&&(i=e[1]),e[1]>r&&(r=e[1]);return new O(t,i,o-t,r-i)}(t),r=Math.floor(31.5),n=(128-2*(r+1))/Math.max(i.width,i.height),a=Math.round(i.width*n)+2*r,l=Math.round(i.height*n)+2*r,s=[];for(const f of t)if(f&&f.length>1){const t=[];for(const e of f){let[o,a]=e;o-=i.x,a-=i.y,o*=n,a*=n,o+=r-.5,a+=r-.5,t.push([o,a])}if(e.asFill){const e=t.length-1;t[0][0]===t[e][0]&&t[0][1]===t[e][1]||t.push(t[0])}s.push(t)}const c=function(e,t,o,i){const r=t*o,n=new Array(r),a=i*i+1;for(let l=0;l<r;++l)n[l]=a;for(const l of e){const e=l.length;for(let r=1;r<e;++r){const e=l[r-1],a=l[r];let s,c,f,m;e[0]<a[0]?(s=e[0],c=a[0]):(s=a[0],c=e[0]),e[1]<a[1]?(f=e[1],m=a[1]):(f=a[1],m=e[1]);let u=Math.floor(s)-i,y=Math.floor(c)+i,p=Math.floor(f)-i,h=Math.floor(m)+i;u<0&&(u=0),y>t&&(y=t),p<0&&(p=0),h>o&&(h=o);const g=a[0]-e[0],d=a[1]-e[1],S=g*g+d*d;for(let i=u;i<y;i++)for(let r=p;r<h;r++){let l,s,c=(i-e[0])*g+(r-e[1])*d;c<0?(l=e[0],s=e[1]):c>S?(l=a[0],s=a[1]):(c/=S,l=e[0]+c*g,s=e[1]+c*d);const f=(i-l)*(i-l)+(r-s)*(r-s),m=(o-r-1)*t+i;f<n[m]&&(n[m]=f)}}}for(let l=0;l<r;++l)n[l]=Math.sqrt(n[l]);return n}(s,a,l,r);return e.asFill&&function(e,t,o,i,r){for(const n of e){const e=n.length;for(let a=1;a<e;++a){const e=n[a-1],l=n[a];let s,c,f,m;e[0]<l[0]?(s=e[0],c=l[0]):(s=l[0],c=e[0]),e[1]<l[1]?(f=e[1],m=l[1]):(f=l[1],m=e[1]);let u=Math.floor(s),y=Math.floor(c)+1,p=Math.floor(f),h=Math.floor(m)+1;u<i&&(u=i),y>t-i&&(y=t-i),p<i&&(p=i),h>o-i&&(h=o-i);for(let n=p;n<h;++n){if(e[1]>n==l[1]>n)continue;const a=(o-n-1)*t;for(let t=u;t<y;++t)t<(l[0]-e[0])*(n-e[1])/(l[1]-e[1])+e[0]&&(r[a+t]=-r[a+t]);for(let e=i;e<u;++e)r[a+e]=-r[a+e]}}}}(s,a,l,r,c),[I(c,r),a,l]}function I(e,t){const o=2*t,i=e.length,r=new Uint8Array(4*i);for(let n=0;n<i;++n){const t=.5-e[n]/o;N(t,r,4*n)}return r}function X(e,t,o,i,r){const a=e.referencesGeometry()&&r?function(e,t,o){const{transform:i,hasZ:r,hasM:a}=o;z.has(t)||z.set(t,function(e){const t={};switch(e){case"esriGeometryPoint":return(e,o,i,r)=>b(o,t,e,i,r);case"esriGeometryPolygon":return(e,o,i,r)=>v(o,t,e,i,r);case"esriGeometryPolyline":return(e,o,i,r)=>S(o,t,e,i,r);case"esriGeometryMultipoint":return(e,o,i,r)=>d(o,t,e,i,r);default:return l.getLogger("esri.views.2d.support.arcadeOnDemand").error(new s("mapview-arcade",`Unable to handle geometryType: ${e}`)),e=>e}}(t));const c=z.get(t)(e.geometry,i,r,a);return n(n({},e),{geometry:c})}(t,i,r):t,c=e.repurposeFeature(a);try{return e.evaluate(n(n({},o),{$feature:c}))}catch(f){return l.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",f),null}}const z=new Map,J=l.getLogger("esri.symbols.cim.cimAnalyzer");function H(e){switch(e){case"Butt":return 0;case"Square":return 2;case"Round":default:return 1}}function Y(e){switch(e){case"Bevel":return 0;case"Miter":return 2;case"Round":default:return 1}}function $(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":return"center";case"Justify":return"justify"}}function R(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function A(e,t,o,i){let r;e[t]?r=e[t]:(r={},e[t]=r),r[o]=i}function F(e){const t=e.markerPlacement;return t&&t.angleToLine?1:0}async function j(e,t,o,i){const r=o||[];if(!e)return r;let n,a;const l={};if("CIMSymbolReference"!==e.type)return J.error("Expect cim type to be 'CIMSymbolReference'"),r;if(n=e.symbol,a=e.primitiveOverrides,a){const e=[];for(const o of a){const i=o.valueExpressionInfo;if(i&&t){const r=i.expression,n=u(r,t.spatialReference,t.fields).then((e=>{e&&A(l,o.primitiveName,o.propertyName,e)}));e.push(n)}else null!=o.value&&A(l,o.primitiveName,o.propertyName,o.value)}await y(e)}switch(n.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":!function(e,t,o,i,r,n){if(!e)return;const a=e.symbolLayers;if(!a)return;let l;const s=k.getSize(e);"CIMPointSymbol"===e.type&&"Map"===e.angleAlignment&&(l=1);let c=a.length;for(;c--;){const f=a[c];if(!f||!1===f.enable)continue;const m=[];switch(C.findApplicableOverrides(f,t,m),f.type){case"CIMSolidFill":G(f,o,m,i,r);break;case"CIMPictureFill":W(f,o,m,i,r);break;case"CIMHatchFill":T(f,o,m,i,r);break;case"CIMGradientFill":D(f,o,m,i,r);break;case"CIMSolidStroke":U(f,o,m,i,r,"CIMPolygonSymbol"===e.type,s);break;case"CIMPictureStroke":E(f,o,m,i,r,"CIMPolygonSymbol"===e.type,s);break;case"CIMGradientStroke":q(f,o,m,i,r,"CIMPolygonSymbol"===e.type,s);break;case"CIMCharacterMarker":if(B(f,o,m,i,r))break;break;case"CIMPictureMarker":if(B(f,o,m,i,r))break;"CIMLineSymbol"===e.type&&(l=F(f)),V(f,o,m,i,r,l,s);break;case"CIMVectorMarker":if(B(f,o,m,i,r))break;"CIMLineSymbol"===e.type&&(l=F(f)),Z(f,o,m,i,r,l,s,n);break;default:J.error("Cannot analyze CIM layer",f.type)}}}(n,a,l,t,r,i)}return r}function G(e,t,o,i,r){const n=e.primitiveName,a=h(e.color),l=c(JSON.stringify(e)).toString();r.push({type:"fill",templateHash:l,materialHash:0===o.length?l:()=>l,cim:e,materialOverrides:null,colorLocked:e.colorLocked,color:oe(n,t,"Color",i,a,te),height:0,angle:0,offsetX:0,offsetY:0,scaleX:1,effects:e.effects})}function W(e,t,o,i,r){const n=e.primitiveName,a=e.tintColor?h(e.tintColor):{r:255,g:255,b:255,a:1},l=c(JSON.stringify(e)).toString(),s=c(`${e.url}${JSON.stringify(e.colorSubstitutions)}`).toString();r.push({type:"fill",templateHash:l,materialHash:0===o.length?s:()=>s,cim:e,materialOverrides:null,colorLocked:e.colorLocked,effects:e.effects,color:oe(n,t,"TintColor",i,a,te),height:oe(n,t,"Height",i,e.height),scaleX:oe(n,t,"ScaleX",i,e.scaleX),angle:oe(n,t,"Rotation",i,e.rotation),offsetX:oe(n,t,"OffsetX",i,e.offsetX),offsetY:oe(n,t,"OffsetY",i,e.offsetY)})}function T(e,t,o,i,r){const n=["Rotation","OffsetX","OffsetY"],a=o.filter((t=>t.primitiveName!==e.primitiveName&&-1===n.indexOf(t.propertyName))),l=e.primitiveName,s=c(JSON.stringify(e)).toString(),f=c(`${e.separation}${JSON.stringify(e.lineSymbol)}`).toString();r.push({type:"fill",templateHash:s,materialHash:0===o.length?f:ie(f,t,a,i),cim:e,materialOverrides:a,colorLocked:e.colorLocked,effects:e.effects,color:{r:255,g:255,b:255,a:1},height:oe(l,t,"Separation",i,e.separation),scaleX:1,angle:oe(l,t,"Rotation",i,e.rotation),offsetX:oe(l,t,"OffsetX",i,e.offsetX),offsetY:oe(l,t,"OffsetY",i,e.offsetY)})}function D(e,t,o,i,r){const n=c(JSON.stringify(e)).toString();r.push({type:"fill",templateHash:n,materialHash:0===o.length?n:ie(n,t,o,i),cim:e,materialOverrides:null,colorLocked:e.colorLocked,effects:e.effects,color:{r:128,g:128,b:128,a:1},height:0,angle:0,offsetX:0,offsetY:0,scaleX:1})}function U(e,t,o,i,r,n,a){const l=c(JSON.stringify(e)).toString(),s=e.primitiveName,f=h(e.color),m=void 0!==e.width?e.width:4,u=H(e.capStyle),y=Y(e.joinStyle),p=e.miterLimit;r.push({type:"line",templateHash:l,materialHash:0===o.length?l:()=>l,cim:e,materialOverrides:null,isOutline:n,colorLocked:e.colorLocked,effects:e.effects,color:oe(s,t,"Color",i,f,te),width:oe(s,t,"Width",i,m),cap:oe(s,t,"CapStyle",i,u),join:oe(s,t,"JoinStyle",i,y),miterLimit:oe(s,t,"MiterLimit",i,p),referenceWidth:a,zOrder:ee(e.name),isDashed:!1})}function E(e,t,o,i,r,n,a){const l=c(`${e.url}${JSON.stringify(e.colorSubstitutions)}`).toString(),s=e.primitiveName,f=h(e.tintColor),m=void 0!==e.width?e.width:4,u=H(e.capStyle),y=Y(e.joinStyle),p=e.miterLimit,g=c(JSON.stringify(e)).toString();r.push({type:"line",templateHash:g,materialHash:0===o.length?l:()=>l,cim:e,materialOverrides:null,isOutline:n,colorLocked:e.colorLocked,effects:e.effects,color:oe(s,t,"TintColor",i,f,te),width:oe(s,t,"Width",i,m),cap:oe(s,t,"CapStyle",i,u),join:oe(s,t,"JoinStyle",i,y),miterLimit:oe(s,t,"MiterLimit",i,p),referenceWidth:a,zOrder:ee(e.name),isDashed:!1})}function q(e,t,o,i,r,n,a){const l=e.primitiveName,s=void 0!==e.width?e.width:4,f=H(e.capStyle),m=Y(e.joinStyle),u=e.miterLimit,y=c(JSON.stringify(e)).toString();r.push({type:"line",templateHash:y,materialHash:0===o.length?y:ie(y,t,o,i),cim:e,materialOverrides:null,isOutline:n,colorLocked:e.colorLocked,effects:e.effects,color:{r:128,g:128,b:128,a:1},width:oe(l,t,"Width",i,s),cap:oe(l,t,"CapStyle",i,f),join:oe(l,t,"JoinStyle",i,m),miterLimit:oe(l,t,"MiterLimit",i,u),referenceWidth:a,zOrder:ee(e.name),isDashed:!1})}function B(e,t,o,i,r){const n=e.markerPlacement;if(!n||"CIMMarkerPlacementInsidePolygon"!==n.type)return!1;const a=n,l=["Rotation","OffsetX","OffsetY"],s=o.filter((t=>t.primitiveName!==e.primitiveName&&-1===l.indexOf(t.propertyName))),f=c(JSON.stringify(e)).toString();return r.push({type:"fill",templateHash:f,materialHash:0===o.length?f:ie(f,t,s,i),cim:e,materialOverrides:s,colorLocked:e.colorLocked,effects:e.effects,color:{r:255,g:255,b:255,a:1},height:oe(a.primitiveName,t,"StepY",i,a.stepY),scaleX:1,angle:oe(a.primitiveName,t,"GridAngle",i,a.gridAngle),offsetX:oe(a.primitiveName,t,"OffsetX",i,a.offsetX),offsetY:oe(a.primitiveName,t,"OffsetY",i,a.offsetY)}),!0}function V(e,t,o,i,r,n,a){const l=e.primitiveName,s=e.size,f=e.scaleX,m=e.rotation,u=e.offsetX,y=e.offsetY,p=h(e.tintColor),g=c(`${e.url}${JSON.stringify(e.colorSubstitutions)}`).toString();let d=!1,S="";for(const c of o)c.primitiveName===l&&(void 0!==c.value?S+=`-${c.primitiveName}-${c.propertyName}-${JSON.stringify(c.value)}`:c.valueExpressionInfo&&(d=!0));r.push({type:"marker",templateHash:c(JSON.stringify(e)+S).toString(),materialHash:d?()=>g:g,cim:e,materialOverrides:null,colorLocked:e.colorLocked,effects:e.effects,scaleSymbolsProportionally:!1,alignment:n,size:oe(l,t,"Size",i,s),scaleX:oe(l,t,"ScaleX",i,f),rotation:oe(l,t,"Rotation",i,m),offsetX:oe(l,t,"OffsetX",i,u),offsetY:oe(l,t,"OffsetY",i,y),color:oe(l,t,"TintColor",i,p,te),anchorPoint:e.anchorPoint,isAbsoluteAnchorPoint:"Relative"!==e.anchorPointUnits,outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,frameHeight:0,rotateClockwise:e.rotateClockwise,referenceSize:a,sizeRatio:1,markerPlacement:e.markerPlacement})}function Z(e,t,o,i,r,n,a,l){const s=e.markerGraphics;if(!s)return;let c=0;if(e.scaleSymbolsProportionally){const t=e.frame;t&&(c=t.ymax-t.ymin)}for(const f of s)if(f){const s=f.symbol;if(!s)continue;switch(s.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":_(e,f,o,t,i,r,n,a,c,l);break;case"CIMTextSymbol":K(e,f,t,o,i,r,n,a,c)}}}function K(e,t,o,i,r,a,l,s,f){C.findApplicableOverrides(t,i,[]);const m=t.geometry;if(!("x"in m)||!("y"in m))return;const u=t.symbol,y=(p=u).underline?"underline":p.strikethrough?"line-through":"none";var p;const d=function(e){let t="normal",o="normal";if(e){const i=e.toLowerCase();-1!==i.indexOf("italic")?t="italic":-1!==i.indexOf("oblique")&&(t="oblique"),-1!==i.indexOf("bold")?o="bold":-1!==i.indexOf("light")&&(o="lighter")}return{style:t,weight:o}}(u.fontStyleName);u.font=n({family:u.fontFamilyName,decoration:y},d);const S=e.frame,v=m.x-.5*(S.xmin+S.xmax),b=m.y-.5*(S.ymin+S.ymax),O=e.size/f,N=e.primitiveName,x=(u.height||0)*O,M=u.angle||0,P=((u.offsetX||0)+v)*O,L=((u.offsetY||0)+b)*O,w=h(k.getFillColor(u));let I=h(k.getStrokeColor(u)),X=k.getStrokeWidth(u);X||(I=h(k.getFillColor(u.haloSymbol)),X=u.haloSize*O);let z="";for(const n of i)n.primitiveName===N&&void 0!==n.value&&(z+=`-${n.primitiveName}-${n.propertyName}-${JSON.stringify(n.value)}`);const J=JSON.stringify(e.effects)+Number(e.colorLocked)+JSON.stringify(e.anchorPoint)+e.anchorPointUnits+JSON.stringify(e.markerPlacement),H=c(JSON.stringify(t)+J+z).toString();a.push({type:"text",templateHash:H,materialHash:()=>c(JSON.stringify(u.font)).toString(),cim:u,materialOverrides:null,colorLocked:e.colorLocked,effects:e.effects,alignment:l,anchorPoint:{x:e.anchorPoint?e.anchorPoint.x:0,y:e.anchorPoint?e.anchorPoint.y:0},isAbsoluteAnchorPoint:"Relative"!==e.anchorPointUnits,fontName:u.fontFamilyName,decoration:"none",weight:"normal",style:"normal",size:oe(N,o,"Size",r,x),angle:oe(N,o,"Rotation",r,M),offsetX:oe(N,o,"OffsetX",r,P),offsetY:oe(N,o,"OffsetY",r,L),horizontalAlignment:$(u.horizontalAlignment),verticalAlignment:R(u.verticalAlignment),text:oe(t.primitiveName,o,"TextString",r,t.textString,g,u.textCase),color:w,outlineColor:I,outlineSize:X,referenceSize:s,sizeRatio:1,markerPlacement:e.markerPlacement})}function _(e,t,o,i,r,a,l,s,f,m){const u=t.symbol,y=t.geometry;if(!y)return;const p=u.symbolLayers;if(!p)return;if(m)return void Q(e,t,i,o,r,a,l,s,f);let g=p.length;for(;g--;){const m=p[g];if(m&&!1!==m.enable)switch(m.type){case"CIMSolidFill":case"CIMSolidStroke":{const u=P(y);if(!u)continue;const[p,g,d]=L(u,e.frame,e.size,e.anchorPoint,"Relative"!==e.anchorPointUnits),S="CIMSolidFill"===m.type,v={type:"sdf",geom:y,asFill:S},b=e.primitiveName,O=e.size,N=e.rotation||0,C=e.offsetX,x=e.offsetY,M=m.primitiveName,w=h(S?k.getFillColor(m):k.getStrokeColor(m)),I=S?{r:0,g:0,b:0,a:0}:h(k.getStrokeColor(m)),X=k.getStrokeWidth(m);if(!S&&!X)break;let z=!1,J="";for(const e of o)e.primitiveName!==M&&e.primitiveName!==b||(void 0!==e.value?J+=`-${e.primitiveName}-${e.propertyName}-${JSON.stringify(e.value)}`:e.valueExpressionInfo&&(z=!0));const H=JSON.stringify(n(n({},e),{markerGraphics:null})),Y=c(JSON.stringify(v)).toString(),$={type:"marker",templateHash:c(JSON.stringify(t)+JSON.stringify(m)+H+J).toString(),materialHash:z?()=>Y:Y,cim:v,materialOverrides:null,colorLocked:e.colorLocked,effects:e.effects,scaleSymbolsProportionally:e.scaleSymbolsProportionally,alignment:l,anchorPoint:{x:g,y:d},isAbsoluteAnchorPoint:!1,size:oe(e.primitiveName,i,"Size",r,O),rotation:oe(e.primitiveName,i,"Rotation",r,N),offsetX:oe(e.primitiveName,i,"OffsetX",r,C),offsetY:oe(e.primitiveName,i,"OffsetY",r,x),scaleX:1,frameHeight:f,rotateClockwise:e.rotateClockwise,referenceSize:s,sizeRatio:p,color:oe(M,i,"Color",r,w,te),outlineColor:oe(M,i,"Color",r,I,te),outlineWidth:oe(M,i,"Width",r,X),markerPlacement:e.markerPlacement};a.push($);break}default:Q(e,t,i,o,r,a,l,s,f)}}}function Q(e,t,o,i,r,n,a,l,s){const m=(y=t,{type:(u=e).type,enable:!0,name:u.name,colorLocked:u.colorLocked,primitiveName:u.primitiveName,anchorPoint:u.anchorPoint,anchorPointUnits:u.anchorPointUnits,offsetX:0,offsetY:0,rotateClockwise:u.rotateClockwise,rotation:0,size:u.size,billboardMode3D:u.billboardMode3D,depth3D:u.depth3D,frame:u.frame,markerGraphics:[y],scaleSymbolsProportionally:u.scaleSymbolsProportionally,respectFrame:u.respectFrame,clippingPath:u.clippingPath,effects:u.effects});var u,y;let p=[];const h=["Rotation","OffsetX","OffsetY"];p=i.filter((t=>t.primitiveName!==e.primitiveName||-1===h.indexOf(t.propertyName)));let g="";for(const c of i)void 0!==c.value&&(g+=`-${c.primitiveName}-${c.propertyName}-${JSON.stringify(c.value)}`);const[d,S,v]=k.getTextureAnchor(m),b=e.primitiveName,O=e.rotation||0,N=e.offsetX||0,C=e.offsetY||0,x=c(JSON.stringify(m)+g).toString(),M={type:"marker",templateHash:x,materialHash:0===p.length?x:ie(x,o,p,r),cim:m,materialOverrides:p,colorLocked:e.colorLocked,effects:e.effects,scaleSymbolsProportionally:e.scaleSymbolsProportionally,alignment:a,anchorPoint:{x:d,y:S},isAbsoluteAnchorPoint:!1,size:e.size,rotation:oe(b,o,"Rotation",r,O),offsetX:oe(b,o,"OffsetX",r,N),offsetY:oe(b,o,"OffsetY",r,C),color:{r:0,g:0,b:0,a:0},outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,scaleX:1,frameHeight:s,rotateClockwise:e.rotateClockwise,referenceSize:l,sizeRatio:v/f(e.size),markerPlacement:e.markerPlacement};n.push(M)}function ee(e){if(e&&0===e.indexOf("Level_")){const t=parseInt(e.substr(6),10);if(NaN!==t)return t}return 0}function te(e){if(!e||0===e.length)return null;const t=new p(e).toRgba();return{r:t[0],g:t[1],b:t[2],a:t[3]}}function oe(e,t,o,i,r,n,a){const l=t[e];if(l){const e=l[o];if("string"==typeof e||"number"==typeof e||e instanceof Array)return n?n.call(null,e,a):e;if(null!=e&&e instanceof m)return(t,o,l)=>{let s=X(e,t,{$view:l},i.geometryType,o);return null!==s&&n&&(s=n.call(null,s,a)),null!==s?s:r}}return r}function ie(e,t,o,i){for(const r of o)if(r.valueExpressionInfo){const e=t[r.primitiveName]&&t[r.primitiveName][r.propertyName];e instanceof m&&(r.fn=(t,o,r)=>X(e,t,{$view:r},i.geometryType,o))}return(t,i,r)=>{for(const e of o)e.fn&&(e.value=e.fn(t,i,r));return c(e+C.buildOverrideKey(o)).toString()}}function re(e,t){if(!t||0===t.length)return e;const o=JSON.parse(JSON.stringify(e));return C.applyOverrides(o,t),o}export{j as N,w as f,re as j,x as r,X as s};
