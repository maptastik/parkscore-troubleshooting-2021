import{a1 as e,aM as t,m as a,k as r,fp as s,q as o,ai as n}from"./vendor.1ee57f36.js";async function l(a,r={},s){await a.load(s);const o=e(a.itemUrl,"resources"),{start:n=1,num:l=10,sortOrder:c="asc",sortField:i="created"}=r,u={query:{start:n,num:l,sortOrder:c,sortField:i},signal:t(s,"signal")},p=await a.portal._request(o,u);return{total:p.total,nextStart:p.nextStart,resources:p.resources.map((({created:e,size:t,resource:r})=>({created:new Date(e),size:t,resource:a.resourceFromPath(r)})))}}async function c(s,o,n,l){if(!s.hasPath())throw new a(`portal-item-resource-${o}:invalid-path`,"Resource does not have a valid path");await s.portalItem.load(l);const c=e(s.portalItem.userItemUrl,"add"===o?"addResources":"updateResources"),[i,u]=p(s.path),d=await m(n),h=new FormData;return i&&"."!==i&&h.append("resourcesPrefix",i),h.append("fileName",u),h.append("file",d,u),h.append("f","json"),r(l)&&l.access&&h.append("access",l.access),await s.portalItem.portal._request(c,{method:"post",body:h,signal:t(l,"signal")}),s}async function i(r,s,o){if(!s.hasPath())throw new a("portal-item-resources-remove:invalid-path","Resource does not have a valid path");await r.load(o);const n=e(r.userItemUrl,"removeResources");await r.portal._request(n,{method:"post",query:{resource:s.path},signal:t(o,"signal")}),s.portalItem=null}async function u(a,r){await a.load(r);const s=e(a.userItemUrl,"removeResources");return a.portal._request(s,{method:"post",query:{deleteAll:!0},signal:t(r,"signal")})}function p(e){const t=e.lastIndexOf("/");return-1===t?[".",e]:[e.slice(0,t),e.slice(t+1)]}function d(e){const[t,a]=function(e){const t=s(e);return o(t)?[e,""]:[e.slice(0,e.length-t.length-1),`.${t}`]}(e),[r,n]=p(t);return[r,n,a]}async function m(e){return e instanceof Blob?e:(await n(e.url,{responseType:"blob"})).data}function h(t,a){if(!t.hasPath())return null;const[r,,s]=d(t.path);return t.portalItem.resourceFromPath(e(r,a+s))}function f(t,a){if(!t.hasPath())return null;const[r,,s]=d(t.path);return t.portalItem.resourceFromPath(e(r,a+s))}export{c as addOrUpdateResource,m as contentToBlob,l as fetchResources,h as getSiblingOfSameType,f as getSiblingOfSameTypeI,u as removeAllResources,i as removeResource,d as splitPrefixFileNameAndExtension};
