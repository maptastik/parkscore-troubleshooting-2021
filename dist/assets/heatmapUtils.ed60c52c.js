import{f1 as t,bT as e}from"./vendor.1ee57f36.js";const n=(()=>{if(!("document"in t))return()=>null;const e=document.createElement("canvas"),n=e.getContext("2d");return e.height=512,e.width=1,t=>{n.clearRect(0,0,1,e.height);const r=n.createLinearGradient(0,0,0,e.height);for(const{ratio:e,color:n}of t.colorStops)r.addColorStop(Math.max(e,.001),`rgba(${n[0]}, ${n[1]}, ${n[2]}, ${n[3]})`);return n.fillStyle=r,n.fillRect(0,0,1,e.height),n.getImageData(0,0,1,e.height).data}})();function r(t,e,n,r){const{blurRadius:a,fieldOffset:o,field:i}=e,f=new Float64Array(n*r),c=function(t){const e=Math.round(3*t),n=2*t*t,r=new Float64Array(2*e+1);for(let a=0;a<=r.length;a++)r[a]=Math.exp(-Math.pow(a-e,2)/n)/Math.sqrt(2*Math.PI)*(t/2);return r}(a),l=Math.round(3*a);let u,h=Number.NEGATIVE_INFINITY;const s=function(t,e){return null!=t?"string"==typeof e?e=>-1*+e.readAttribute(t):n=>+n.readAttribute(t)+e:t=>1}(i,o),d=new Set;for(const g of t){const t=g.getCursor();for(;t.next();){const e=t.getObjectId();if(d.has(e))continue;d.add(e);const a=t.readLegacyPointGeometry(),o=+s(t),i=a.x-l,g=a.y-l,m=Math.max(0,i),y=Math.max(0,g),b=Math.min(r,a.y+l),w=Math.min(n,a.x+l);for(let t=y;t<b;t++){const e=c[t-g];for(let r=m;r<w;r++){const a=c[r-i];u=f[t*n+r]+=e*a*o,u>h&&(h=u)}}}}return{matrix:f.buffer,max:h}}function a(t,n,r,a,o,i){t.canvas.width=t.canvas.height=n,t.clearRect(0,0,n,n);const f=t.getImageData(0,0,n,n);r&&a&&f.data.set(new Uint8ClampedArray(function(t,n,r,a,o){const i=new Uint32Array(t*t),f="buffer"in n?n:new Float64Array(n),c="buffer"in r?new Uint32Array(r.buffer):new Uint32Array(new Uint8Array(r).buffer),l=c.length/(o-a);for(let u=0;u<f.length;u++){const t=f[u],n=Math.floor((t-a)*l);i[u]=c[e(n,0,c.length-1)]}return i.buffer}(n,r,a,o,i))),t.putImageData(f,0,0)}export{a,r as o,n as r};
